{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sonic\\\\OneDrive\\\\Documents\\\\FInal Version(Hopefully) for stella site\\\\stellabelessimovies\\\\src\\\\components\\\\Modal.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport './modal.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Modal({\n  movie,\n  status,\n  toggleModal\n}) {\n  _s();\n  const videoRef = useRef(null);\n  const [isVideoReady, setIsVideoReady] = useState(false);\n\n  // Generate unique storage key for each movie\n  const getStorageKey = () => `video_time_${movie.id || movie.title.replace(/\\s+/g, '_')}`;\n  useEffect(() => {\n    if (status && videoRef.current) {\n      const video = videoRef.current;\n\n      // Load saved time from localStorage\n      const savedTime = parseFloat(localStorage.getItem(getStorageKey()) || '0');\n      const handleLoadedMetadata = () => {\n        if (savedTime > 0 && savedTime < video.duration) {\n          video.currentTime = savedTime;\n        }\n        setIsVideoReady(true);\n        video.play().catch(console.error);\n      };\n      const handleTimeUpdate = () => {\n        // Save progress every few seconds\n        if (Math.floor(video.currentTime) % 3 === 0) {\n          localStorage.setItem(getStorageKey(), video.currentTime.toString());\n        }\n      };\n      const handleEnded = () => {\n        // Remove saved time when video ends\n        localStorage.removeItem(getStorageKey());\n      };\n      video.addEventListener('loadedmetadata', handleLoadedMetadata);\n      video.addEventListener('timeupdate', handleTimeUpdate);\n      video.addEventListener('ended', handleEnded);\n      return () => {\n        video.removeEventListener('loadedmetadata', handleLoadedMetadata);\n        video.removeEventListener('timeupdate', handleTimeUpdate);\n        video.removeEventListener('ended', handleEnded);\n      };\n    }\n  }, [status, movie]);\n  const handleModalClose = () => {\n    if (videoRef.current) {\n      videoRef.current.pause();\n      // Save final time\n      localStorage.setItem(getStorageKey(), videoRef.current.currentTime.toString());\n    }\n    setIsVideoReady(false);\n    toggleModal();\n  };\n  const restartVideo = () => {\n    localStorage.removeItem(getStorageKey());\n    if (videoRef.current) {\n      videoRef.current.currentTime = 0;\n      videoRef.current.play();\n    }\n  };\n  const savedTime = parseFloat(localStorage.getItem(getStorageKey()) || '0');\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `movieModal ${status ? 'active' : ''}`,\n    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"#\",\n      className: \"modalClose\",\n      onClick: handleModalClose,\n      children: /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n        name: \"close-outline\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), status && savedTime > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"resumeIndicator\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Resume from \", Math.floor(savedTime / 60), \":\", Math.floor(savedTime % 60).toString().padStart(2, '0'), \"?\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: restartVideo,\n        className: \"restartBtn\",\n        children: \"Start Over\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this), status && /*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      width: \"1280\",\n      height: \"720\",\n      controls: true,\n      preload: \"metadata\",\n      className: \"modalVideo\",\n      children: [/*#__PURE__*/_jsxDEV(\"source\", {\n        src: movie.video,\n        type: \"video/mp4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"source\", {\n        src: movie.video,\n        type: \"video/webm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"source\", {\n        src: movie.video,\n        type: \"video/ogg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this), \"Your browser does not support the video tag.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(Modal, \"g8XHoirh3AQHrFn8jRvyXO6zZ3w=\");\n_c = Modal;\nexport default Modal;\nvar _c;\n$RefreshReg$(_c, \"Modal\");","map":{"version":3,"names":["React","useEffect","useState","useRef","jsxDEV","_jsxDEV","Modal","movie","status","toggleModal","_s","videoRef","isVideoReady","setIsVideoReady","getStorageKey","id","title","replace","current","video","savedTime","parseFloat","localStorage","getItem","handleLoadedMetadata","duration","currentTime","play","catch","console","error","handleTimeUpdate","Math","floor","setItem","toString","handleEnded","removeItem","addEventListener","removeEventListener","handleModalClose","pause","restartVideo","className","children","href","onClick","name","fileName","_jsxFileName","lineNumber","columnNumber","padStart","ref","width","height","controls","preload","src","type","_c","$RefreshReg$"],"sources":["C:/Users/sonic/OneDrive/Documents/FInal Version(Hopefully) for stella site/stellabelessimovies/src/components/Modal.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport './modal.css';\r\n\r\nfunction Modal({ movie, status, toggleModal }) {\r\n  const videoRef = useRef(null);\r\n  const [isVideoReady, setIsVideoReady] = useState(false);\r\n\r\n  // Generate unique storage key for each movie\r\n  const getStorageKey = () => `video_time_${movie.id || movie.title.replace(/\\s+/g, '_')}`;\r\n\r\n  useEffect(() => {\r\n    if (status && videoRef.current) {\r\n      const video = videoRef.current;\r\n      \r\n      // Load saved time from localStorage\r\n      const savedTime = parseFloat(localStorage.getItem(getStorageKey()) || '0');\r\n      \r\n      const handleLoadedMetadata = () => {\r\n        if (savedTime > 0 && savedTime < video.duration) {\r\n          video.currentTime = savedTime;\r\n        }\r\n        setIsVideoReady(true);\r\n        video.play().catch(console.error);\r\n      };\r\n\r\n      const handleTimeUpdate = () => {\r\n        // Save progress every few seconds\r\n        if (Math.floor(video.currentTime) % 3 === 0) {\r\n          localStorage.setItem(getStorageKey(), video.currentTime.toString());\r\n        }\r\n      };\r\n\r\n      const handleEnded = () => {\r\n        // Remove saved time when video ends\r\n        localStorage.removeItem(getStorageKey());\r\n      };\r\n\r\n      video.addEventListener('loadedmetadata', handleLoadedMetadata);\r\n      video.addEventListener('timeupdate', handleTimeUpdate);\r\n      video.addEventListener('ended', handleEnded);\r\n\r\n      return () => {\r\n        video.removeEventListener('loadedmetadata', handleLoadedMetadata);\r\n        video.removeEventListener('timeupdate', handleTimeUpdate);\r\n        video.removeEventListener('ended', handleEnded);\r\n      };\r\n    }\r\n  }, [status, movie]);\r\n\r\n  const handleModalClose = () => {\r\n    if (videoRef.current) {\r\n      videoRef.current.pause();\r\n      // Save final time\r\n      localStorage.setItem(getStorageKey(), videoRef.current.currentTime.toString());\r\n    }\r\n    setIsVideoReady(false);\r\n    toggleModal();\r\n  };\r\n\r\n  const restartVideo = () => {\r\n    localStorage.removeItem(getStorageKey());\r\n    if (videoRef.current) {\r\n      videoRef.current.currentTime = 0;\r\n      videoRef.current.play();\r\n    }\r\n  };\r\n\r\n  const savedTime = parseFloat(localStorage.getItem(getStorageKey()) || '0');\r\n\r\n  return (\r\n    <div className={`movieModal ${status ? 'active' : ''}`}>\r\n      <a href=\"#\" className=\"modalClose\" onClick={handleModalClose}>\r\n        <ion-icon name=\"close-outline\"></ion-icon>\r\n      </a>\r\n      \r\n      {/* Resume indicator */}\r\n      {status && savedTime > 0 && (\r\n        <div className=\"resumeIndicator\">\r\n          <p>Resume from {Math.floor(savedTime / 60)}:{Math.floor(savedTime % 60).toString().padStart(2, '0')}?</p>\r\n          <button onClick={restartVideo} className=\"restartBtn\">\r\n            Start Over\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {status && (\r\n        <video\r\n          ref={videoRef}\r\n          width=\"1280\"\r\n          height=\"720\"\r\n          controls\r\n          preload=\"metadata\"\r\n          className=\"modalVideo\"\r\n        >\r\n          <source src={movie.video} type=\"video/mp4\" />\r\n          <source src={movie.video} type=\"video/webm\" />\r\n          <source src={movie.video} type=\"video/ogg\" />\r\n          Your browser does not support the video tag.\r\n        </video>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Modal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}