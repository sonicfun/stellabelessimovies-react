{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./modal.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Modal(_ref){let{movie,status,toggleModal}=_ref;const[videoSrc,setVideoSrc]=useState(\"\");useEffect(()=>{if(status){// Store original scroll position\nconst scrollY=window.scrollY;// Disable page scroll with multiple methods for better compatibility\ndocument.body.style.overflow='hidden';document.body.style.position='fixed';document.body.style.top=\"-\".concat(scrollY,\"px\");document.body.style.width='100%';// Prevent scroll on touch devices\ndocument.body.style.touchAction='none';// Add autoplay param\nconst autoplayUrl=movie.video.includes(\"?\")?\"\".concat(movie.video,\"&autoplay=1\"):\"\".concat(movie.video,\"?autoplay=1\");setVideoSrc(autoplayUrl);// Store scroll position for restoration\ndocument.body.setAttribute('data-scroll-y',scrollY);}else{// Get stored scroll position\nconst scrollY=document.body.getAttribute('data-scroll-y');// Re-enable page scroll and restore position\ndocument.body.style.overflow='';document.body.style.position='';document.body.style.top='';document.body.style.width='';document.body.style.touchAction='';// Restore scroll position\nif(scrollY){window.scrollTo(0,parseInt(scrollY));document.body.removeAttribute('data-scroll-y');}setVideoSrc(\"\");// clear to stop video when modal closes\n}// Cleanup on unmount\nreturn()=>{document.body.style.overflow='';document.body.style.position='';document.body.style.top='';document.body.style.width='';document.body.style.touchAction='';const scrollY=document.body.getAttribute('data-scroll-y');if(scrollY){window.scrollTo(0,parseInt(scrollY));document.body.removeAttribute('data-scroll-y');}};},[status,movie.video]);// Handle escape key to close modal\nuseEffect(()=>{const handleEscape=event=>{if(event.key==='Escape'&&status){toggleModal();}};if(status){document.addEventListener('keydown',handleEscape);}return()=>{document.removeEventListener('keydown',handleEscape);};},[status,toggleModal]);// Handle backdrop click to close modal\nconst handleBackdropClick=e=>{if(e.target===e.currentTarget){toggleModal();}};return/*#__PURE__*/_jsxs(\"div\",{className:\"movieModal \".concat(status?'active':''),onClick:handleBackdropClick,children:[/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"modalClose\",onClick:toggleModal,children:/*#__PURE__*/_jsx(\"ion-icon\",{name:\"close-outline\"})}),status&&/*#__PURE__*/_jsx(\"iframe\",{width:\"1280\",height:\"720\",src:videoSrc,title:\"\".concat(movie.title,\" | Official Movie\"),frameBorder:\"0\",allow:\"autoplay; accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\",allowFullScreen:true})]});}export default Modal;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Modal","_ref","movie","status","toggleModal","videoSrc","setVideoSrc","scrollY","window","document","body","style","overflow","position","top","concat","width","touchAction","autoplayUrl","video","includes","setAttribute","getAttribute","scrollTo","parseInt","removeAttribute","handleEscape","event","key","addEventListener","removeEventListener","handleBackdropClick","e","target","currentTarget","className","onClick","children","href","name","height","src","title","frameBorder","allow","allowFullScreen"],"sources":["C:/Projects/stellabelessimovies/src/components/Modal.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './modal.css';\r\n\r\nfunction Modal({ movie, status, toggleModal }) {\r\n  const [videoSrc, setVideoSrc] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (status) {\r\n      // Store original scroll position\r\n      const scrollY = window.scrollY;\r\n      \r\n      // Disable page scroll with multiple methods for better compatibility\r\n      document.body.style.overflow = 'hidden';\r\n      document.body.style.position = 'fixed';\r\n      document.body.style.top = `-${scrollY}px`;\r\n      document.body.style.width = '100%';\r\n      \r\n      // Prevent scroll on touch devices\r\n      document.body.style.touchAction = 'none';\r\n      \r\n      // Add autoplay param\r\n      const autoplayUrl = movie.video.includes(\"?\")\r\n        ? `${movie.video}&autoplay=1`\r\n        : `${movie.video}?autoplay=1`;\r\n      setVideoSrc(autoplayUrl);\r\n\r\n      // Store scroll position for restoration\r\n      document.body.setAttribute('data-scroll-y', scrollY);\r\n    } else {\r\n      // Get stored scroll position\r\n      const scrollY = document.body.getAttribute('data-scroll-y');\r\n      \r\n      // Re-enable page scroll and restore position\r\n      document.body.style.overflow = '';\r\n      document.body.style.position = '';\r\n      document.body.style.top = '';\r\n      document.body.style.width = '';\r\n      document.body.style.touchAction = '';\r\n      \r\n      // Restore scroll position\r\n      if (scrollY) {\r\n        window.scrollTo(0, parseInt(scrollY));\r\n        document.body.removeAttribute('data-scroll-y');\r\n      }\r\n      \r\n      setVideoSrc(\"\"); // clear to stop video when modal closes\r\n    }\r\n\r\n    // Cleanup on unmount\r\n    return () => {\r\n      document.body.style.overflow = '';\r\n      document.body.style.position = '';\r\n      document.body.style.top = '';\r\n      document.body.style.width = '';\r\n      document.body.style.touchAction = '';\r\n      \r\n      const scrollY = document.body.getAttribute('data-scroll-y');\r\n      if (scrollY) {\r\n        window.scrollTo(0, parseInt(scrollY));\r\n        document.body.removeAttribute('data-scroll-y');\r\n      }\r\n    };\r\n  }, [status, movie.video]);\r\n\r\n  // Handle escape key to close modal\r\n  useEffect(() => {\r\n    const handleEscape = (event) => {\r\n      if (event.key === 'Escape' && status) {\r\n        toggleModal();\r\n      }\r\n    };\r\n\r\n    if (status) {\r\n      document.addEventListener('keydown', handleEscape);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscape);\r\n    };\r\n  }, [status, toggleModal]);\r\n\r\n  // Handle backdrop click to close modal\r\n  const handleBackdropClick = (e) => {\r\n    if (e.target === e.currentTarget) {\r\n      toggleModal();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className={`movieModal ${status ? 'active' : ''}`}\r\n      onClick={handleBackdropClick}\r\n    >\r\n      <a href=\"#\" className=\"modalClose\" onClick={toggleModal}>\r\n        <ion-icon name=\"close-outline\"></ion-icon>\r\n      </a>\r\n      {status && (\r\n        <iframe\r\n          width=\"1280\"\r\n          height=\"720\"\r\n          src={videoSrc}\r\n          title={`${movie.title} | Official Movie`}\r\n          frameBorder=\"0\"\r\n          allow=\"autoplay; accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\r\n          allowFullScreen\r\n        ></iframe>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Modal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}